### 2022/07/11/월

아이디어 회의 위주로 진행되었다. 아이디어 하면 나름 자신있었는데, IoT/웹 이라는 주제로는 이상하게 그럴싸한게 거의 떠오르지 않았다.

팀원들과 지난주부터 모았던 아이디어들을 적당히 추려서 교수님께 6개를 들고갔으며, 그 중 스마트 약통과 강아지용 IoT가 할만하다고 평을 받았다.

첫 오프라인이였고, 수면패턴때문에 밤을 세고 가서 그런지 컨디션이 좋지 못했다.

[아이디어_회의.pdf](./files/아이디어_회의.pdf)



### 2022/07/12/화

아침에 스크럼을 처음 진행했다. 어제 무엇을 했고, 오늘 무엇을 할 예정인지 팀원들과 공유하니 다른팀원들이 무엇을 생각중인지 오늘 뭘 해야할지 좀 명확해지는것 같아 좋았다.

아이디어 확정 및 일부 구체화를 진행했다. 아이디어는 스마트 약통으로 정해졌다. 강아지는 딥러닝을 사용해야되는데, 강아지를 키우는사람이 한명도 없어 시현을 하는것에도 어려움이 있을거라 결론내렸기 때문이다.

[약통_구체화.md](./files/약통_구체화.md)



### 2022/07/13/수

선배들의 예시를 보고 기본적인 와이어프레임을 짜며 ERD를 설계하기로 했다. 다같이 와이어프레임을 만들며 세부 기능에 대한 여러 토의가 있었고, 시간이 매우 금방 지나갔다. 와이어프레임은 작성 했지만, ERD는 완벽히 끝내지 못했다.

또 깃이나 지라 등 컨벤션도 정하려 했는데, 신기하게도 팀에서 나만 git을 사용하고 있었다. 교육초반에 git을 알려주신 1학기 김탁희 교수님께 다시한번 감사한 마음이 들었다. 팀원들에게 git을 간단히 설명해 주었는데, 아니 사실 알려준것도 없는데 팀원들은 git을 곧잘 사용했다. 나도 혼자 git을 쓸 땐 branch를 잘 사용하지 않았기에 부족한게 많다 느껴졌고 git 공부의 필요성을 느꼈다.

선배님들 예시 중에 문서화를 정말 잘한 팀이 있었는데, 우리팀도 그렇게 깔끔하게 문서화가 되면 좋을것 같다는 생각이 들었다. 그래서 회의록이나 스토리보드, 기능명세서 등 문서화가 필요할만한 것들이 뭐가있을지 정리했다.

[wireframe](https://miro.com/app/board/uXjVOmGhtP0=/)

[ERD](https://www.erdcloud.com/d/m7TMDCTGwL2ZCnntM)

[문서화 할 것들.md](./files/문서화 할 것들.md)



### 2022/07/14/목

문서들을 한곳에서 정리하고 확인하기 위해 노션을 이용하기로 했다. 노션에다 어제 정리한 문서화 해야할것들을 모두 페이지로 만들었다.

어제 미처 못한 ERD를 구체화 하기로 했다. ERD를 완벽히 끝내려 했는데, 생각해보니 기능을 완벽히 정하지 않았다. 약통의 칸 별로 무슨 약이 들어있는지 적어야 할지, 실제 약 정보랑 매칭할 것인지 등 세부적인 기능들의 필요성이나 더 나은 기능들을 계속해서 토의했고 오늘도 시간이 무척 빠르게 지나갔다. 1학기 최종 프로젝트때 기획/설계에서 내용을 너무 적게 잡아 나중에 구현이 일찍 끝나서 할게 없었던 기억이 있었기에 이번엔 최대한 다양한 기능을 넣고 파워풀한 웹과 IoT를 만들고 싶었다. 하지만 팀원들과 상의 결과 크게 필요성이 느껴지지 않는데, 어렵기도한 기능들은 안하는게 맞다고 결정되었고 조금은 아쉬웠다.

간단한 기능명세서와 스토리보드를 함께 만들었다. 또한 디자인을 위한 컬러팔레트를 함꼐 결정했다.

[노션](https://frill-banon-790.notion.site/0374b94c92b04f5487baa3075d598054)

[스토리보드](https://www.figma.com/file/0arBOeysoMNl8Lj0KiaBhY/Untitled?node-id=0%3A1)



### 2022/07/15/금

스마트 약통이라는 아이디어가 꼭 필요한 제품/서비스인지 팀원들과 회의감이 생겼고, 처음부터 아이디어 회의를 다시 진행하기로 했다. 아이디어 회의만 거의 5,6시간 한 결과 스티커사진부스처럼 사진을 찍고 꾸밀 수 있는 기기를 만드는게 어떨까 싶어 코치님들께 컨펌을 받았다. 기존에 있던것과 큰 차별점이 없고 IoT/Web적으로도 큰 장점이 없다 등등 확실한 진단을 내려주셨다.

[오늘 회의 내용](./files/2022-07-15_회의내용.md)



### 2022/07/16/토

주말이지만 잠시 모여 세부아이디어 정리를 하기로 했고, 인생네컷에서 무엇을 더 추가시켜 차별점을 만들지 위주로 준비해온 아이디어를 공유했다. 증강현실 사진이라던가, 사진들을 편집하고 묶음으로도 꾸밀수 있게하여 링크를 외부로 공유하는 SNS, 찍은 사진을 이모티콘으로 활용가능한 채팅서비스 등 많은 아이디어가 나왔다. 어떤 아이디어가 좋고, 어떤식으로 구현됐으면 좋겠다가 모두 다른것 같아 다음주 월요일까지 핵심 기능과 본인이 생각하는 우리 프로젝트의 모습을 ppt3장정도로 간단히 정리해오기로 했다.

아침부터 알고리즘 문제를 풀었는데, 많이 풀지 못했다. 3개만 풀고 FE공부를 했어야 됐는데, 잘 안풀리니 계속 붙잡게 됐다. React에 자신이 없는데 걱정이 몰려온다.



### 2022/07/17/일

유튜브로 React 강의를 조금 듣고, Git 강의를 들었다. 아직 React를 어떻게 응용하는지 잘 감이 잡히지 않아 내일은 제공된 프로젝트 스켈레톤 코드를 읽어보며 공부해야겠다. 어제 회의에서 프로젝트 주제에 대해 모두 동상이몽하고 있을 수 있으니 간단하게 ppt나 글로 정리해오기로 했으며, 이를 정말 간단하게 ppt로 만들었다.

우리가 정한 프로젝트 주제로 할만한 것들이 많은것 같아 기분이 좋았지만, 막상 제대로 구현하려면 큰 노력이 들어갈 것 같아 한편으로는 걱정도 된다.

[내가 생각하는 A101 프로젝트 구체화](./files/내가생각하는아이디어.pptx)



### 2022/07/18/월

지난주 금요일에 바꾼 사진부스 아이디어에 대한 회의를 진행했다. 주말동안 본인이 생각하는 아이디어의 구체적인 모습에 대해 6명 모두 발표를 진행했고, 생각보다 좋은 아이디어도 었었으며 내용이 정리되는 느낌이 들었다. 프로젝트 명은 포레스트(PhoRest)로 하기로 했으며, 핵심기능, 세부기능 등을 모두 명세할 수 있게 됐다. 다만 오늘 ERD 완료까지 목표였지만, ERD가 생각보다 너무 어려워서 다 끝내지 못했다. 오히려 더 큰 과제가 생겼는데, 교수님께서 NoSQL인 MongoDB를 추천해주셔서 이를 다루는 BE 친구들이 사용여부를 고민해오기로 했다.



### 2022/07/19/화

오늘은 DB ERD를 완벽히 짜고, 스토리보드를 완성하는걸 목표로 프로젝트를 시작했다. 백에서 No SQL인 MongoDB대신 그냥 관계형DB MySQL을 쓰기로 하였고, ERD도 금방 완성해왔다. FE는 스토리보드를 작성해보기로 했는데, Figma를 먼저 제대로 알아야 할 것 같아 이를 공부했다. 하지만 얼마 시간을 갖지 못하고 백이 완성한 ERD에 대한 회의와 사진 AR 기능에 대한 회의를 진행하게 되었다.

우선 ERD는 교수님께 괜찮다는 얘기를 들었고, 사진 AR기능도 찾아본 결과 AR관련 JS 라이브러리가 존재하는걸 알 수 있었다. 심지어 보경이가 한 웹사이트에서 제공하는 기능으로 AR사진을 만들어 우리 계획을 간단히 현실화 하기도 했다. 문제는 AR을 위한 사진 혹은 동영상을 어떤식으로 찍을지, 데이터를 어디서 어떻게 처리할지 정하기가 어려웠단것이다. 원래라면 IoT기기(사진촬영기기)에서 적절한 동영상파일을 만들고 이를 서버로 보내는게 맞지만, 라즈베리파이가 이를 처리할 수 없을거라 생각됐으며, 또 서버로 보내 처리하기엔 방대한 데이터를 보내는데 처리속도가 느리지 않을까 걱정됐다. 결국엔 결론을 내리지 못하고 우선 다음주 평가를 우선으로 준비하기로 결정되었다.

프로젝트가 여러 시행착오와 여러 회의를 거치며 점점 뼈대를 갖추고 있다. 하지만 한편으론 도돌이표 같은 회의에 너무 시간을 낭비하는것 같기도 하다. 팀원들 모두 각자의 아이디어가 많고 생각이 다양해서 하나로 합치는데 오래걸리는것 같다. 내일은 이러한 점을 어필해서 적절한 시간안배를 건의해봐야겠다.

[AR사진구현모습](./files/AR사진.png)



### 2022/07/20/수

오늘은 간단한 와이어프레임과 프로젝트 로고, 그리고 API통신을 위한 URL문서를 완료했다. 와이어프레임은 회의를 하며 아날로그 스케치를 했고, 그것을 보경이가 피그마로 어느정도 예쁘게 옮겼다. 로고는 다같이 상의를 해서 정하는데 생각보단 시간이 많이 소요되었다. 남에게는 크게 중요하지 않을 로고지만, 프로젝트의 주제와 슬로건이 표현돼야 한다고 다들 생각했기에 신중하게 결정했다.

백과 함께 API 요청 방식과 응답내용 등을 정했는데, 꽤나 복잡하지만 FE/BE간 데이터의 흐름과 서비스의 디테일한 내용을 생각해 볼 수 있는 유의미한 시간이였다. 특히 일반적인 웹서비스와는 달리 사용자의 첫 진입경로가 QR을 통한 웹페이지 접속이며, 로그인을 했을때 QR페이지에 나타났던 사진들이 본인 사진으로 편입되도록 해야 한다는 점이 살짝 어려운 부분이였다.

오늘 리액트를 통한 FE 구현에 대해 간단한 수업이 있었는데, React UI 툴인 MUI가 나왔다. 커스텀이 어느정도 가능할진 확인해봐야겠지만 쓸만한것 같다.

[프로젝트 로고](./files/logo.png)



### 2022/07/21/목

IoT 기기 외관을 어떤식으로 패키징 할 것인지를 제외하면 계속해서 리액트 공부를 진행했다.

패키징은 골판지로 직접 만들거나 골판지 가구를 사서 이용하기로 했으며 부스는 추후에 시간이나 여유가 있으면 만들기로 했다. 리액트는 react-router-dom, styled-components, axios 등의 라이브러리와 useEffect, Context등을 익혔다.

최근에 프린트기를 이용할 일이 없어서 한 반년동안 안썼는데, 프로젝트에서 내 프린터기를 사용하기로해서 오랜만에 작동시켜보니 약간의 문제가 있었다. 노즐이 굳은건 청소해줘서 해결됐는데, 프린터기가 종이를 제대로 먹지 못했다. 전에도 이런 문제가 있었는데 프린터기를 해체, 조립했더니 해결됐던 경험이 있다. 하지만 그때 문제 원인을 알고 적절히 해결한게 아니라 어쩌다 보니 해결된거라 이번에도 해결할수 있을지 모르겠다.



### 2022/07/22/금

오늘도 어제에 이어 리액트 강의를 들었다. 오늘은 redux나 local-storage, lazy, memo 등에 대해 배웠다. 보경이와 둘이 FE를 해야하는데, 내가 게시판과 메인페이지 부분을 맡기로 했으며 보경이가 마이페이지를 맡기로 했다. 스켈레톤 코드를 봤는데, 생각보다 금방 할 수도 있겠다는 생각이 들었다. 모레부터 프로젝트 코딩에 들어가려는데 생각한대로 쉽게 됐으면 좋겠다.



## 2022/07/23/토

내일 정보처리기사가 있어서 오늘하루는 정보처리기사를 공부했다. 하루만으로 안될것 같긴 하지만 그래도 시험을 안보러 가는 것보단 나을것 같아서 정처기에 하루를 투자했다. 목표의 반절정도를 끝내고 알고리즘 문제를 하나 푸려는데 너무 안풀려서 오기로 계속 붙잡게 되었고 정처기 공부를 다 끝내지 못하게 되었다.

사진 인화지가 와서 프린트 해봤는데 A4와 달리 문제없이 출력된다. 다만 인화지 재질이 막 좋은것같진 않다.



### 2022/07/24/일

노원까지 한시간이 넘는 거리를 가서 아침에 정보처리기사 시험을 보고왔다. 지난번에 이틀 공부하고 1문제 차이로 자격증을 취득 못했는데 이번엔 하루도 공부를 못해서 기대없이 갔다. 근데 인터넷에 나온 가채점 결과 이번에도 한문제로 취득을 못할것 같아 없던 아쉬움이 크게 생겼다.

이번 주말에 각자 React코드를 조금씩 작성해오기로 했는데, 코드 한줄 작성하지 않고 시험후에 쉬다보니 저녁이였다. 부랴부랴 react-create-app을 하여 기본 파일구조를 잡아보려 했다. skeleton코드와 1학기때 했던 Vue프로젝트 구조 등을 참고했더니 어느정도 구조가 나왔다. 다만 skeletion코드를 자세히 볼수록 IntersectionObserver라던가 React-router-dom의 switch 등 잘 모르는 것들이 나왔고 제대로 찾아보기엔 시간이 부족했다.

어차피 Redux를 쓸것인지 Context를 쓸것인지 그런것도 아직 상의를 안해봤기에 내일 여러 얘기를 하며 구조를 짜고 코딩을 시작하면 될 것 같다.



### 2022/07/25/월

오늘은 FE팀원과 Redux사용과 폴더 구조 및 페이지 종류 들을 상의하고 이후에는 계속 개발을 했다. Vue로 프로젝트를 처음했을때도 단번에 해낸것은 아니지만, 따로 수업시간이 있어서 자세히 배운 뒤였기에 금방금방한 느낌이였다. 반면 리엑트는 인터넷강의 좀 듣고 프로젝트를 진행하려니까 코드가 잘 나오지 않았다. 특히 한 컴포넌트 내에서 data들을 한번에 정의하고 사용할 수 있었던 Vue에 비해 useState나 변수를 계속 생성하려니까 먼가 지저분해지는 느낌이 들어 마음에 안들었다.



### 2022/07/26/화

오늘은 로그인, 회원가입 로직을 위주로 작업하였다. 3시부터 실습코치세션수업이나 취업특강이 있어서 개발에 많은 시간을 집중하진 못했다.

내가 java반이여서 spring강의를 들었다면 좋았을텐데, spring은 어떤식으로 로그인이 구현되는지 모르니까 FE도 짜기가 애매하단 생각이 들었다. 생각해보니 회원가입은 JWT같은 인증, 인가를 건들이지 않고 구현할 수 있었다. 어제 BE에서 회원가입을 만들었다고 해서 오늘 나도 회원가입, 로그인, 로그아웃을 만드려 했는데 로그인, 로그아웃과 같은 인증, 인가를 다루는 부분은 아직 잘 모른다고 다음주에 구현한다고 듣게되었다.

원래는 2학기가 거의 다 끝날때야 기업들에 지원을 할 생각이였는데, 취업특강을 들으며 그 생각이 바꼈다. 지금부터 미리 지원하고 경험해야 나중에 빠르게 취직이 가능할것 같다.



### 2022/07/27/수

어제 마저 못한 로그인, 로그아웃, 회원가입 로직을 짜려고 했다. vue에서는 store에서 한번에 state들을 처리할 수 있었지만, react는 redux를 쓰더라도 컴포넌트 안에서만 상태변경이 가능했다. 이러한 이유로 REST API 관련 함수들만 모아서 파일을 만들고 컴포넌트에서 필요할때마다 깔끔하게 불러 쓰려고 했지만 실패했다. 로그인으로 토큰을 받아왔으면 localstorage와 client memory에 담아야하는데 local은 쉽게 넣을 수 있지만, client memory인 redux에는 컴포넌트 안에서만 접근 가능했다. 이외에도 다른 데이터를 정의하거나 컴포넌트에서 사용할 때마다 적어줘야 할게 많아서 헷갈리고 코드가 지저분해지는게 안타까웠다. 조금이라도 옳은 방법으로 깔끔하게 프로젝트를 진행하고싶었는데 성급했던것 같기도 하고 주어진 스켈레톤 코드나 인터넷의 레퍼런스를 더 찾아보며 코딩을 해야겠다. 단 중간발표가 얼마 안남아서 로그인같은건 나중으로 미루고 뭔가 보여줄 수 있는 내용물을 먼저 작업하기로 했다.



### 2022/07/28/목

어제 계획했던대로 오늘부턴 3주차 발표를 위해 보여주는 부분을 위주로 꾸몄다. 그 전까지 로그인이나 API로 받을 데이터들이 어떻게 관리될지, 그런 보이지 않는 부분을 만졌다면 오늘은 월요일에 대강 잡아놓은 pages에 더미데이터를 만들어 표시되도록 했다. 또 게시판 내용이 carousel로 표사되도록 vanilla JS로 만들었으나 너무 안예쁘고 기능(터치로 스위핑)도 부족하다고 느껴서 swiper라는 라이브러리를 이용해 다시구현했다.



### 2022/07/29/금

오늘은 어제 끝내지 못한 댓글과 사진 다운로드 기능을 진행했다. 더미 댓글을 사용하기에 어제 useState로 만들어 놨는데 이를 redux로 바꾸느라 시간이 좀 걸렸다. 상태 불변성의 원리를 지키며 CRUD하려면 한번씩 더 생각해봐야 한다는걸 배웠으며 redux 수정함수에 여러 파라미터가 안보내져서 함수들을 객체로 만들고 {a, b} = actions.payload 처럼 불러오니 사용 가능했다. 또 store파일을 여러개 만들어서 createSlice를 여러개 사용할 수 있을줄 알았으나 불가능하단걸 깨달았다. 대신 여러개를 합칠수 있는 함수가 존재한다는데 다음에 다른 store를 만들때 찾아봐야겠다. 이외에도 코드를 짜면서 react에 적응이 되어간다는 느낌이 살짝 들어서 기분이 좋았다.



### 2022/07/30/토

어제 다운로드 로직을 짜다가 다 못했었는데, 오늘 완성시켰다. 이미지 url로 fetch 한 뒤 blob()을 써서 blob 형식으로 변환한뒤 이를 다시 createObjectURL해서 blob객체를 가리키는 URL을 생성했다. 그 뒤 a 태그 href에 넣어주고, a 태그에 download 속성도 주니 다운로드 로직이 완료됐다.

react hook은 조건부로 사용될 수가 없었다. url params에 따라 store에서 가져올 내용을 달리하고 싶었는데, 그럴 수 없었다.

redux-toolkit에서 store를 여러개 두고 합치는 방법을 생각해봤는데, 그냥 createSlice는 여러 폴더로 두고 configureStore에서 합치니 됐다.

테스트용으로 사진업로드(post) api 통신을 만들었는데 포스트맨에선 잘 작동했지만, 클라이언트에선 작동하지 않았다. 이 원인을 찾아 계속 헤맸는데 백의 CORS설정이 문제였다. aws s3 접근시 cors에 걸리는것 같다. 또 get요청도 같은 문제가 있었는데 여기선 CORS에러라는 메시지가 떠서 빠르게 알 수 있었다.

reducer에서 axios 요청 후 dispatch하니 여러 오류가 있었다. Proxy를 이용하는 axios에 대한 문제였고, 사실 reducer에서 api요청을 하고 dispatch하는게 안좋은거라 문서들을 보고 다른 구조로 진행해봐야겠다.



### 2022/07/31/일

내일 중간발표가 있는날이고 이를 위해 오늘 팀원들과 회의와 발표 리허설을 진행했다. 게시판 글은 더미파일을 이용하면 되지만, 시연에서 사진을 찍고 해당 사진을 웹에서 확인할 수 있도록 해야됐다. 기존에 더미파일을 대체하여 백과 API를 통해 찍힌 사진이 표현되도록 했으며, 페이지의 스타일링을 조금 고쳐줬다.

기존에 쓰던 게시글용 더미파일이 아무 의미없는 사진들이였는데, 이것도 게시판 내용에 맞게 직접 그려서 넣었다. 



### 2022/08/01/월

오늘 중간발표가 있었다. 팀원들과 최대한 준비를 해갔지만 아쉬운 점도 많았다. 특히 어제까지만 해도 됐었던 다운로드 기능이 안된점이 가장 아쉬웠으며, 화면 공유가 늦어져서 발표 시연이 매끄럽지 못한점이 아쉬웠다.

발표 후에는 팀원들과 앞으로의 계획이나 세부 디자인 및 스토리보드 완성시키기 등을 진행했으며 코딩은 따로 하지 않았다.

중간발표가 물론 아쉬운 점도 남았지만, 우리팀은 나름 괜찮았다고 생각했기에 지금까지 고생한만큼 팀원들과 저녁식사를 함께하고 보드게임도 하였다.



### 2022/08/02/화

어제에 이어 오늘도 회의를 오래 진행했다. 오전에는 와이어프레임을 더 자세히 짜고, 오후에는 패키징을 빨리 해서 사용자들을 만드는게 좋을것 같다는 컨설턴트님의 피드백에 따라 패키징을 어떻게 할 지 계속 상의했다. 결국 내가 이케아에서 적당한 크기의 선반을 사가면 내일 오프라인때 하드보드지를 덧대거나 하는 작업을 진행하기로 했다. 하지만 팀원중 한명이 오늘 코로나에 확진됐고 내일은 모두 오프라인 수업으로 진행되어 계획이 틀어졌다.



### 2022/08/03/수

기획이 끝나고 개발을 시작했을 때 가장 먼저 login, signup을 만들었지만 JWT나 CORS같은 이슈로 백에서 login, signup보단 다른 작업을 먼저 진행했고, 실제로 서버를 통한 로그인은 해보지 못했었다. 지난주말에 회원인증부분이 끝났다고 해서 오늘 서버를 통해 제대로된 회원가입과 로그인을 할 수 있도록 만들었다.

사실 FE에서도 API 호출하는 부분을 컴포넌트에 둬야할지, redux custom middleware를 이용해야할지 잘 몰랐기에 지난 주말에 안하고 며칠 묻어뒀었지만 오늘 제대로 공부했다. dispatch시 api를 사용할게 있다면 middleware를 쓰는게 맞으나 컴포넌트에서 서버와 통신하고 결과를 dispatch해주는 방식도 가능했다.

그래서 custom middleware를 정의해주려 했지만 currentUser가 문제였다. 로그인이나 회원가입 api를 호출하고 token과 currentUser를 모두 dispatch 해야한다. 근데 middleware에서 두곳에다 dispatch하는 방법이 가능한지 모르겠고, middleware를 여러개 만드는것도 배보다 배꼽이 더 커지는 느낌이라 그냥 컴포넌트에서 API를 호출하기로 했다.

axios에서 body에 data를 담기위해 body: data라 적어줬는데 에러가 있었다. data: data로 적어야 body에 담아서 간다. 또 reducer actions를 export 할 때 구조분해할당 {}을 깜빡 안적어놔서 에러가 있었다.



### 2022/08/04/목

currentUser api가 완성됐다고 해서 사용자 정보를 계속해서 업데이트 하도록 만들었다. user profile edit api도 완성됐다해서 프로필 편집 페이지도 손댔다. 유저 정보를 put으로 보내면 해당 내용으로 유저정보를 바꾸도록 api가 구현됐는데, 생각해보니 이전 비밀번호와 비교(비밀번호를 바꾸지 않으려했는데,  실수로 이전과 다르게 입력하면 비밀번호가 바뀌므로)하는 과정이 필요할 것 같아 백에게 수정을 요청했다.

profile edit에서 프로필이미지를 지정하는데 여러 어려움이 있었다. 예를들면 로컬의 파일에 접근 불가해 업로드가 안된다거나 S3서버에 먼저 업로드하고 url을 받아와서 스프링서버에 url을 보내야 하는 등 하다가 머리가 답답해서 다른 부분부터 하기로 했다.

currentUser가 완료되어 인증, 인가가 되었기에 이제 다른 api도 문제없이 쓸 수 있게 됐다. 그래서 프로필 편집을 뒤로하고 메인페이지의 커뮤니티 데이터를 받는걸 먼저 고치기로 했다. 데이터를 받아와 저장하고 띄우는것은 어렵지 않았으나 Infinite scroll을 구현하기가 힘들었다. scroll event를 인식해서 다음 정보를 받아오도록 했는데, 스크롤이 너무 민감해서 수없이 많은 api 요청을 보낸다. 내일 이부분과 프로필이미지 부분을 마저 완성해야겠다.

이외에도 백이 api를 많이 완성해서 postman으로 같이 테스트 해보고 수정이 필요해보이는건 수정을 요청했다.



### 2022/08/05/금

커뮤니티의 인피니트 스크롤은 일단 보류하고 푸시하였다. 어제 끝내지 못한 회원정보 수정을 완료했다. 유저 테이블의 필드가 더 생기면서 이전에 다루지 않았던게 생겨 회원정보와 회원가입 모두 고쳤다.

받아온 파일을 formdata형식으로 axios로 보내는게 익숙치 않았다. axios headers에 formdata로 보낸다는걸 넣어주고, 파일은 e.target.files[0]으로 받아와 직접 new FormData에 append 해주었다. 이미지 파일만 받기 위해 input 태그에 accept 속성을 추가해 "image/*"을 넣어주었다. (다른 ".jpg .png .gif" 같은 방식은 파일관리자를 열었을때 지정한 확장자파일이여도 파일이 보이지 않았다.)

회원정보 수정에서 기존 프로필 사진이 있을때 이미지를 띄우고, 새로 업로드하면 변경하고, 또 삭제버튼을 누르면 기존 프로필이나 추가한 이미지가 삭제되도록 하는게 생각보다 어려웠다. useSelector가 useState보다 늦게 작동하여 useState 기본값으로 useSelector로 받아온 변수를 넣을 수가 없었는데, useEffect Hook을 통해 useEffect(() => {setUseStateValue(useSelector로 얻는 변수)}, [useSelector로 얻는 변수]) 처럼 해결할 수 있었다.

이벤트함수로 두개 이상을 지정할 땐 함수 사이에 세미콜론; 을 넣으면 됐다.

이외에도 핸드폰 번호나 비밀번호 입력값 제한하기나 postId를 URL에 노출할 때 우리만의 함수를 거치고 base64로 인코딩해서 보내는 등의 작업을 했다. 근데 작업을 할 수록 해야될게 계속 생각나고 점점 늘어나는것 같다... BE, IoT는 이미 대부분의 작업을 마쳐서 부수적인 것들을 하고있는데 FE가 너무 느려서 미안하다.



### 2022/08/06/토

생각보다 해야할 것들을 너무 못했다. 토스 코테가 4시에 끝나고 좀 쉬다보니 저녁 6시가 되었다.

회원가입 및 회원정보 수정에서 인풋에 들어갈 수 있는 단어를 정규식으로 제한했다. 다운로드 페이지와 나머지 페이지의 URL 인코딩 함수를 다르게 변경했다. 게시글 디테일 페이지에서 좋아요, 북마크, 댓글 들을 구현했다. 댓글은 완벽히는 못했는데 내일 백이 댓글 API를 고쳐주면 거의 바로 구현되도록 해놓았다.

월요일까지 문제없이 FE가 돌아갈 정도로 완성되야 할텐데 확신이 안선다.



### 2022/08/07/일 ~ 2022/08/08/월

월요일에 시연을 시작하기위해 밤을 셌다. 그러나 생각보다 속도가 나지 않았고 결국 오늘 시연은 못하게 되었다. 물론 기본적인 추천포즈를 못만들었고, 패키징도 완료되진 못했지만 FE의 문제가 가장 컸던것 같다.

시연은 제때에 못했지만 어제오늘동안 나름 한게 많았다. 다운로드 페이지에 접속했을때 게시글 소유자가 되도록 하고, 포즈 게시글 수정페이지를 만들고, 자잘한 버그들을 계속해서 고쳤다.

그 중 기억나는 것은 게시글 수정을 위해 이미지 편집 라이브러리를 이용했는데, 사용환경에서 버전이 안맞는지 튜토리얼대로 해도 실행이 잘 안돼서 많은 시간을 날렸던 것이다.

또 회원정보를 수정하면 마이페이지에서 나오는 프로필은 바뀌지만, 배너에 나오는 작은 프로필이미지가 바뀌지 않는다는 문제점이 있었다. 삼항연산자로 프로필을 표시했는데, useState 처럼 즉각적인 반응을 못하는것 같았다. 그래서 setCurrentUser('') 하고 다시 받아와 넣도록 하니 해결되었다.

게시글 리스트를 보다 좋아요나 북마크 API를 요청하면 좋아요여부 혹은 북마크 여부만 리턴받아서 총 좋아요 수의 업데이트가 안되는 문제가 있었다. 그래서 요청시 게시글의 DTO가 오도록 바꿔달라 하여 문제가 해결되었다.

다른 FE팀원이 푸시한 내용을 보고 리팩토링을 했다. 사실 어떤구조로 했는지 파악하고 오늘 얘기해보려 했는데, 바둑도 훈수둘때 더 잘두는 것처럼 남의 코드가 이상하게 고칠점들이 잘보였다. 다른사람의 방식을 보고있으면 내가하던 방식과 함께 더 나은 개선점들이 떠오른다. 그래서 파일 개수를 반이상 줄이고 코드량도 반가까이 줄이며 동일한 기능을 하게 리팩토링 하였다.



### 2022/08/09 화

회원정보 수정페이지에서 비밀번호 변경을 떼어냈다. 북마크API를 변경했다. 마이페이지에 팔로우 하고있는 사람들을 확인 가능하게 했으며, 기존에 잘못돼있던 게시글 공유여부로직을 수정했다. 이외에도 여러 버그를 수정하거나 코드를 효율적이고 깔끔하게 만들었다.

내일은 react-router-dom을 좀 더 공부하고 navigation guard를 설정해야겠다.



### 2022/08/10/수

오늘은 hotjar, google analytics를 해볼 생각이였는데, 계속해서 오류나 수정할 것들이 눈에 들어와 하지 못했다. 검색컴포넌트, 로그인 로그아웃 상태에 따라 url이동을 막는 navigation gurad, 회원삭제 및 여러 오류 수정을 진행했다. 대부분의 오류는 수정했지만 좋아요, 북마크가 돼있어도 아이콘 색이 변하지 않는 오류였다. 클릭할때만 변하고 다시 돌아오면 색이 빠지는데, 여러 방법으로 바꿔봐도 잘 모르겠다.

하려던걸 못하고 계속 이상한데 시간이 뺏기는 기분이다. 내일은 오늘 하려던 것들을 꼭 하고, 프레임 편집 기능까지 다시한번 시도해 봐야겠다.



### 2022/08/11/목

어제 못했던 hotjar, google analytics를 연결했다. 무료요금제이고 사이트 사용자가 적어서 그런지 생각보다 얻을 수 있는 정보가 적은것 같다.

비밀번호가 없는 카카오 회원을 위해 회원탈퇴를 일반회원과 분기시켰다.

카카오 회원가입시 navigatie(-2)하면 로그인 페이지로 가진다. 반면 카카로 로그인시엔 -2가 로그인창 이전페이지가 되어 문제가 없다. 이를 고치기 위해 로그인 상태라면 /login에 들어갈 수 없기에 NotFound404에서 path가 /login이면 한번 더 뒤로가게 해주었으나 이상하게 콘솔에 에러가 찍히며 잘 먹히지 않았다. 카카오 로그인은 로칼에서 테스트가 불가한데, 카카오로그인은 내가 구현한 부분이 아니고 백이랑도 깊이 연관되어있어 이유는 잘 모르겠다. 계속 푸시해보며 테스트하기도 애매하고 어떻게 고칠지도 떠오르지 않아 일단은 보류했다.

Lighthouse로 성능테스트를 해봤는데 점수가 그리 높지 않았다. hotjar와 google analytics가 자원을 꽤 많이 차지해서 이를 없애면 평균정도는 될 것 같다. 예전부터 페이지 로드나 랜더링 최적화를 진행해보고 싶었기에 페이지 스타일링도 거의 끝나가겠다, 오늘 이에대해 찾아보았다. 하지만 코치님의 말씀을 듣고나니 이런 최적화도 중요하지만 실질적으로 점수를 잘받으려면 발표에서 청중에게 더 좋은 디자인과 그럴듯한 페이지 모습을 보여주는게 더 낫겠다는 생각이 들었다.



### 2022/08/12/금

지난번에 좋아요, 북마크 아이콘이 클릭할때만 변했다가 돌아오면 다시 반영이 안되는 이슈가 있었는데, 알고보니 isLiked가 아니라 isLike여서 반영이 안되는 것이였다. 근데 오타라면 클릭할때도 반응을 안해야 하는게 정상아닌가? isLiked라는 변수가 없으면 밑줄이나 에러가 떴어야 하는게 아닌가? 혹시몰라 ctrl+f로 찾아봤는데 isLiked가 없어서 더 혼란스러웠다. 팀원이 지웠나? typescript라면 이것을 잡아줬을까?

인풋태그와 검색결과박스로 이루어진 박스가 포커스를 잃으면 검색상태를 오프시키려 했지만, onBlur를 사용한 결과 검색결과박스 내용을 클릭해도 검색상태가 바뀌어 검색결과로 이동이 되지 않았다. 일단은 onBlur시 1초 후에 검색상태를 오프시키도록 하여 임시방편을 세워놨지만, 내일 제대로 고처야 겠다.

지금까지 댓글의 줄 개행이 먹지 않았다. pre태그를 쓰니 줄 개행이 먹었지만 글씨체가 바뀌길레 style에서 white-space: pre-line; 을 주어 해결할 수 있었다. textarea로 받았던 내용들을 css를 통해 개행시킬 수 있다니 신기했다.



### 2022/08/13/토

전에 도전했다가 실패했던 이미지 편집 기능을 다시 시도해보았다. 몇가지 라이브러리를 시도하다가 모두 커스텀 할 수 있는 여지가 적고, 문서도 잘 돼있지 않아서 제일 마지막으로 FilerobotImageEditor 라는 라이브러리로 시도했는데, 역시 커스텀은 쉽지 않았지만, 문서가 잘 돼있어서 생각했던것을 구현할 수가 있었다.

사용자가 이미지를 업로드하면 저절로 이미지 편집창에 올라가고, 라이브러리의 save 버튼을 잡아 hidden 시키고, 게시글 작성 버튼을 따로 만들어 클릭하면 save가 눌리게 만들었다. save 버튼이 눌릴때의 함수를 정의 할 수 있는데, 이 때 편집된 이미지 URI를 얻을 수 있고 이를 파일 형식으로 폼데이터에 넣어 게시글을 생성하도록 했다.

한가지 문제점은 버튼의 클래스명이 빌드환경에 따라 달라진다는 것이였다. 로컬에서 실행할때와 젠킨스와 엔진엑스를 통해 배포되었을때 클래스명이 달라 try catch로 둘 다 가능하게 만들었다.

사용자 검색창이 포커스를 잃었을 때 검색결과박스가 닫히도록 기능을 구현했다. 지난번에 onBlur를 통해 구현했다가 setTimeout과 같이 안좋은 방법을 사용했는데, 이번엔 window에 클릭 이벤트리스너를 달고 그때마다 검색박스에 ref.current가 포함되는지 확인했다.

```javascript
const handleSearchBox = (e) => {
    if (searchBox.current && !searchBox.current.contains(e.target)) {
        setIsSearching(false)
    }
}

useEffect(() => {
    window.addEventListener('click', handleSearchBox)
    return (() => {window.removeEventListener('click', handleSearchBox)})
}, [])
```

이상했던점은 handleSearchBox 안에서는 useState값이 제대로 인식이 안됐다는 점이다. 검색중일때도 항상 false 작동했다. 검색결과 useEffect []에서 정의된 state는 컴포넌트가 마운트될 때 한번 빼고는 업데이트 되지 않기때문이였다. dependency array 가 단지 어떤 변수값의 변화에 반응할것인가를 지정하는줄 알았는데, state의 업데이트와도 관련이 있었다.
